# SPanel å‰ç«¯ç›®å½•ç»“æ„è¯´æ˜

## ğŸ“ å®Œæ•´é¡¹ç›®ç»“æ„

```
spanel-bun/
â”œâ”€â”€ backend/                    # åç«¯é¡¹ç›® (Bun + Hono)
â”‚   â”œâ”€â”€ src/
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ frontend/                   # å‰ç«¯é¡¹ç›® (Vue 3 + Vite)
â”‚   â”œâ”€â”€ public/                 # âœ… å¼€å‘æ—¶é™æ€èµ„æº (Viteè§„èŒƒ)
â”‚   â”‚   â”œâ”€â”€ admin/              # Adminé¡µé¢å ä½HTML
â”‚   â”‚   â”‚   â””â”€â”€ index.html
â”‚   â”‚   â”œâ”€â”€ user/               # Useré¡µé¢å ä½HTML
â”‚   â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â”‚   â”œâ”€â”€ login.html
â”‚   â”‚   â”‚   â”œâ”€â”€ register.html
â”‚   â”‚   â”‚   â”œâ”€â”€ node.html
â”‚   â”‚   â”‚   â”œâ”€â”€ shop.html
â”‚   â”‚   â”‚   â”œâ”€â”€ ticket.html
â”‚   â”‚   â”‚   â””â”€â”€ profile.html
â”‚   â”‚   â”œâ”€â”€ assets/             # é™æ€åº“æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ images/             # å›¾ç‰‡èµ„æº
â”‚   â”‚   â”œâ”€â”€ favicon.ico         # ç½‘ç«™å›¾æ ‡
â”‚   â”‚   â””â”€â”€ README.md           # è¯´æ˜æ–‡æ¡£
â”‚   â”‚
â”‚   â”œâ”€â”€ src/                    # æºä»£ç 
â”‚   â”‚   â”œâ”€â”€ pages/              # å¤šé¡µé¢åº”ç”¨å…¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ admin/          # Admin SPA (å•é¡µåº”ç”¨)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ App.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ main.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ router/     # Vue Routeré…ç½®
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ layouts/    # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ views/      # é¡µé¢ç»„ä»¶ (22ä¸ª)
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ index/          # ç”¨æˆ·ç«¯é¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ login/          # ç™»å½•é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ register/       # æ³¨å†Œé¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ node/           # èŠ‚ç‚¹é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ shop/           # å•†åº—é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ ticket/         # å·¥å•é¡µ
â”‚   â”‚   â”‚   â””â”€â”€ profile/        # ä¸ªäººèµ„æ–™é¡µ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ shared/             # å…±äº«ä»£ç 
â”‚   â”‚   â”‚   â”œâ”€â”€ api/            # APIå®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ composables/    # ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ stores/         # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ types/          # TypeScriptç±»å‹
â”‚   â”‚   â”‚   â””â”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ assets/             # èµ„æºæ–‡ä»¶ (ä¼šè¢«webpackå¤„ç†)
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ vite-env.d.ts       # Viteç±»å‹å£°æ˜
â”‚   â”‚   â””â”€â”€ types/              # å…¨å±€ç±»å‹å®šä¹‰
â”‚   â”‚
â”‚   â”œâ”€â”€ dist/                   # âœ… æ„å»ºäº§ç‰© (éƒ¨ç½²ç›®å½•)
â”‚   â”‚   â”œâ”€â”€ admin/              # Adminé™æ€æ–‡ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ index.html
â”‚   â”‚   â”œâ”€â”€ user/               # Useré™æ€æ–‡ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â”‚   â”œâ”€â”€ login.html
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ assets/             # JSã€CSSã€å›¾ç‰‡ç­‰
â”‚   â”‚   â”‚   â”œâ”€â”€ admin-[hash].js
â”‚   â”‚   â”‚   â”œâ”€â”€ index-[hash].js
â”‚   â”‚   â”‚   â”œâ”€â”€ login-[hash].js
â”‚   â”‚   â”‚   â”œâ”€â”€ vue-vendor-[hash].js
â”‚   â”‚   â”‚   â””â”€â”€ element-plus-[hash].js
â”‚   â”‚   â””â”€â”€ index.html
â”‚   â”‚
â”‚   â”œâ”€â”€ vite.config.ts          # Viteé…ç½®
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”‚
â”œâ”€â”€ scripts/                    # è„šæœ¬å·¥å…·
â”‚   â””â”€â”€ deploy-frontend.sh      # âœ… å‰ç«¯éƒ¨ç½²è„šæœ¬
â”‚
â””â”€â”€ docs/                       # æ–‡æ¡£
    â”œâ”€â”€ PLAN.md                 # é¡¹ç›®å®æ–½è®¡åˆ’
    â””â”€â”€ FRONTEND_DIRECTORY_STRUCTURE.md  # æœ¬æ–‡æ¡£
```

## ğŸ¯ ä¸ºä»€ä¹ˆä½¿ç”¨ `frontend/public/` è€Œéæ ¹ç›®å½• `public/`ï¼Ÿ

### âœ… æ¨èæ–¹æ¡ˆï¼š`frontend/public/`

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **ç¬¦åˆViteè§„èŒƒ** | Viteé»˜è®¤ä½¿ç”¨é¡¹ç›®æ ¹ç›®å½•çš„`public/`ä½œä¸ºé™æ€èµ„æºç›®å½• |
| **æ¸…æ™°çš„èŒè´£åˆ†ç¦»** | å‰ç«¯ç›¸å…³çš„æ‰€æœ‰å†…å®¹éƒ½åœ¨`frontend/`ç›®å½•ä¸‹ |
| **é¿å…æ··æ·†** | ä¸ä¼šä¸åç«¯æˆ–æœ€ç»ˆéƒ¨ç½²ç›®å½•æ··æ·† |
| **å¼€å‘ä½“éªŒå¥½** | å¼€å‘æ—¶é€šè¿‡`/`ç›´æ¥è®¿é—®publicä¸­çš„æ–‡ä»¶ |
| **æ„å»ºè‡ªåŠ¨åŒ–** | Viteæ„å»ºæ—¶è‡ªåŠ¨å°†publicå¤åˆ¶åˆ°dist |

### âŒ ä¸æ¨èï¼šæ ¹ç›®å½• `public/`

| é—®é¢˜ | è¯´æ˜ |
|------|------|
| **èŒè´£ä¸æ¸…** | ä¸frontendç›®å½•å‰²è£‚ï¼Œä¸ç¬¦åˆå‰ç«¯å·¥ç¨‹åŒ–è§„èŒƒ |
| **æ··æ·†æ€§å¼º** | å®¹æ˜“ä¸æœ€ç»ˆéƒ¨ç½²ç›®å½•`/var/www/`æ··æ·† |
| **ç»´æŠ¤å›°éš¾** | å‰ç«¯èµ„æºåˆ†æ•£åœ¨å¤šä¸ªä½ç½® |
| **ä¸ç¬¦åˆæƒ¯ä¾‹** | ç°ä»£å‰ç«¯æ¡†æ¶éƒ½ä½¿ç”¨é¡¹ç›®å†…éƒ¨çš„publicç›®å½• |

## ğŸ“¦ ç›®å½•ç”¨é€”è¯´æ˜

### 1. `frontend/public/` - å¼€å‘æ—¶é™æ€èµ„æº

**ç”¨é€”ï¼š**
- å­˜æ”¾ä¸éœ€è¦ç»è¿‡Viteå¤„ç†çš„é™æ€æ–‡ä»¶
- è¿™äº›æ–‡ä»¶ä¼šåŸæ ·å¤åˆ¶åˆ°`dist/`ç›®å½•
- å¼€å‘æ—¶å¯é€šè¿‡ç»å¯¹è·¯å¾„`/`è®¿é—®

**å…¸å‹æ–‡ä»¶ï¼š**
- `favicon.ico` - ç½‘ç«™å›¾æ ‡
- `robots.txt` - çˆ¬è™«è§„åˆ™
- é™æ€HTMLå ä½æ–‡ä»¶ (ç”¨äºå¤šå…¥å£é…ç½®)
- ç¬¬ä¸‰æ–¹åº“ (å¦‚æœä¸é€šè¿‡npmå®‰è£…)

**ç¤ºä¾‹ï¼š**
```html
<!-- åœ¨Vueç»„ä»¶ä¸­å¼•ç”¨ -->
<img src="/images/logo.png" alt="Logo">
```

### 2. `frontend/src/assets/` - éœ€è¦å¤„ç†çš„èµ„æº

**ç”¨é€”ï¼š**
- å­˜æ”¾éœ€è¦ç»è¿‡Vite/Webpackå¤„ç†çš„èµ„æº
- æ”¯æŒæ¨¡å—åŒ–å¯¼å…¥ã€å‹ç¼©ã€hashå‘½åç­‰

**å…¸å‹æ–‡ä»¶ï¼š**
- CSS/SCSSæ–‡ä»¶
- éœ€è¦å‹ç¼©çš„å›¾ç‰‡
- TypeScript/JavaScriptæ¨¡å—

**ç¤ºä¾‹ï¼š**
```typescript
// åœ¨Vueç»„ä»¶ä¸­å¯¼å…¥
import logoImg from '@/assets/images/logo.png'
import './styles/main.css'
```

### 3. `frontend/dist/` - æ„å»ºäº§ç‰© (éƒ¨ç½²ç›®å½•)

**ç”¨é€”ï¼š**
- `bun run build` å‘½ä»¤ç”Ÿæˆ
- åŒ…å«ä¼˜åŒ–åçš„HTMLã€CSSã€JS
- **è¿™æ˜¯å®é™…éƒ¨ç½²åˆ°æœåŠ¡å™¨çš„ç›®å½•**

**æ„å»ºè¿‡ç¨‹ï¼š**
```bash
# 1. æ¸…ç©ºdistç›®å½•
# 2. ç¼–è¯‘TypeScript/Vueç»„ä»¶
# 3. æ‰“åŒ…å‹ç¼©ä»£ç 
# 4. å¤åˆ¶public/å†…å®¹åˆ°dist/
# 5. ç”Ÿæˆhashæ–‡ä»¶å (ç”¨äºç¼“å­˜æ§åˆ¶)
```

## ğŸš€ éƒ¨ç½²æµç¨‹

### å¼€å‘ç¯å¢ƒ
```bash
cd frontend
bun dev          # å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (http://localhost:5173)
```

### ç”Ÿäº§æ„å»º
```bash
cd frontend
bun run build    # ç”Ÿæˆ dist/ ç›®å½•
```

### éƒ¨ç½²åˆ°æœåŠ¡å™¨
```bash
# ä½¿ç”¨è‡ªåŠ¨éƒ¨ç½²è„šæœ¬
bash /root/git/spanel-bun/scripts/deploy-frontend.sh

# æˆ–æ‰‹åŠ¨éƒ¨ç½²
cp -r frontend/dist/* /var/www/spannel/
```

### Nginxé…ç½®
```nginx
server {
    listen 80;
    server_name spanel.example.com;

    # APIä»£ç†åˆ°åç«¯
    location /api {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
    }

    # å‰ç«¯é™æ€æ–‡ä»¶
    location / {
        root /var/www/spannel;
        try_files $uri $uri/ /index.html;
    }

    # Adminç®¡ç†ç«¯
    location /admin {
        alias /var/www/spannel/admin;
        try_files $uri $uri/ /admin/index.html;
    }

    # Userç”¨æˆ·ç«¯
    location /user {
        alias /var/www/spannel/user;
        try_files $uri $uri/ /user/index.html;
    }

    # é™æ€èµ„æºç¼“å­˜
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2)$ {
        root /var/www/spannel;
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

## ğŸ” å…³é”®åŒºåˆ«æ€»ç»“

| ç›®å½• | æ—¶æœº | ç”¨é€” | è®¿é—®æ–¹å¼ |
|------|------|------|----------|
| `frontend/public/` | **å¼€å‘æ—¶** | é™æ€èµ„æºæºæ–‡ä»¶ | ç»å¯¹è·¯å¾„ `/` |
| `frontend/src/` | **å¼€å‘æ—¶** | Vueç»„ä»¶æºä»£ç  | ESæ¨¡å—å¯¼å…¥ |
| `frontend/dist/` | **æ„å»ºå** | ä¼˜åŒ–åçš„éƒ¨ç½²æ–‡ä»¶ | WebæœåŠ¡å™¨ |

## ğŸ“Œ æœ€ä½³å®è·µ

1. âœ… ä½¿ç”¨ `frontend/public/` å­˜æ”¾å¼€å‘æ—¶é™æ€èµ„æº
2. âœ… ä½¿ç”¨ `frontend/src/assets/` å­˜æ”¾éœ€è¦å¤„ç†çš„èµ„æº
3. âœ… éƒ¨ç½²æ—¶ä½¿ç”¨ `frontend/dist/` ç›®å½•
4. âœ… é€šè¿‡ npm/bun ç®¡ç†ä¾èµ–ï¼Œè€Œéç›´æ¥æ”¾public
5. âœ… ä½¿ç”¨è‡ªåŠ¨éƒ¨ç½²è„šæœ¬ `scripts/deploy-frontend.sh`
6. âœ… é…ç½®Nginxç¼“å­˜ç­–ç•¥ä¼˜åŒ–æ€§èƒ½

## ğŸ“ æ€»ç»“

**`frontend/public/` æ˜¯æ­£ç¡®çš„é€‰æ‹©**ï¼Œå› ä¸ºï¼š
- ç¬¦åˆViteå’Œç°ä»£å‰ç«¯å·¥ç¨‹åŒ–è§„èŒƒ
- æ¸…æ™°çš„èŒè´£åˆ†ç¦»
- æ›´å¥½çš„å¼€å‘ä½“éªŒ
- æ›´ç®€å•çš„éƒ¨ç½²æµç¨‹
- é¿å…ç›®å½•æ··æ·†

æ ¹ç›®å½•çš„ `public/` é€‚ç”¨äºï¼š
- å•ä½“åº”ç”¨ (å‰åç«¯ä¸åˆ†ç¦»)
- æ—§é¡¹ç›®è¿ç§»
- ç‰¹æ®Šéœ€æ±‚åœºæ™¯

å¯¹äº SPanel è¿™ç§ç°ä»£åŒ–çš„å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œ`frontend/public/` æ˜¯æœ€ä½³å®è·µã€‚
