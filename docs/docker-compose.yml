version: '3.8'

services:
  spanel-bun:
    build:
      context: .
      dockerfile: Containerfile
    container_name: spanel-bun-dev
    image: spanel-bun:latest
    networks:
      - main
    volumes:
      # 映射本地项目目录到容器
      - /root/git/spanel-bun:/app
      # 如果需要使用本地的 node_modules,取消注释下面这行
      # - /root/git/spanel-bun/node_modules:/app/node_modules
    working_dir: /app
    # 保持容器运行
    command: tail -f /dev/null
    # 根据需要暴露端口
    ports:
      - "3000:3000"
      - "9229:9229"  # 调试端口
    environment:
      - NODE_ENV=development
    restart: unless-stopped

networks:
  main:
    external: true
